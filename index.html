<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="utf-8">
    <base href="./" />
    <title>Test Page</title>

    <!-- -->
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, viewport-fit=cover, interactive-widget=overlays-content, shrink-to-fit=no">

    <!-- -->
    <link rel="icon" type="image/png" href="./favicon.png">

    <!-- -->
    <script type="importmap">{
        "imports": {
            "fest/": "fest-src/",
            "fest/cdnImport": "fest/cdnImport.mjs",
            "fest/dom": "fest-src/dom.ts/src/index.ts",
            "fest/lure": "fest-src/BLU.E/src/index.ts",
            "fest/object": "fest-src/object.ts/src/index.ts",
            "fest/uniform": "fest-src/uniform.ts/src/index.ts",
            "fest/theme": "fest-src/theme.core/src/index.ts"
        }
    }</script>

    <script>
        WeakMap.prototype.getOrInsert ??= function (key, defaultValue) {
            if (!this.has(key)) { this.set(key, defaultValue); }
            return this.get(key);
        };

        WeakMap.prototype.getOrInsertComputed ??= function (key, callbackFunction) {
            if (!this.has(key)) { this.set(key, callbackFunction(key)); }
            return this.get(key);
        };

        Map.prototype.getOrInsert ??= function (key, defaultValue) {
            if (!this.has(key)) { this.set(key, defaultValue); }
            return this.get(key);
        };

        Map.prototype.getOrInsertComputed ??= function (key, callbackFunction) {
            if (!this.has(key)) { this.set(key, callbackFunction(key)); }
            return this.get(key);
        };
    </script>

    <!-- -->
    <script data-owner="runtime" data-type="interact">
        // avoid any dragging when no-needed...
        document.documentElement.addEventListener("dragstart", (ev) => {
            if (ev?.target?.matches?.("div, img, picture, canvas, video, svg")) {
                ev.preventDefault();
            }
        }, {passive: false, capture: true});

        // comment to enable native context menu
        document.documentElement.addEventListener("contextmenu", (ev)=>{
            ev.stopPropagation();
            ev.preventDefault();
        }, {capture: true});

        //
        if ("virtualKeyboard" in navigator && navigator?.virtualKeyboard) {
            // @ts-ignore
            navigator.virtualKeyboard.overlaysContent = true;
        }
    </script>
</head>
<body>

    <script src="./test/Design.ts" type="module"></script>

    <div data-scheme="solid" data-chroma="0.999" style="inline-size: 100px; block-size: 100px; padding: 10px; box-sizing: border-box;">
        Themed Rectangle.
    </div>

</body>
</html>
